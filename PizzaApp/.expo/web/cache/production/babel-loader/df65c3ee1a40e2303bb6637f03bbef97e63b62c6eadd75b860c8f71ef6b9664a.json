{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{types}from\"mobx-state-tree\";import{api}from\"../services/api\";import{EpisodeModel}from\"./Episode\";import{withSetPropAction}from\"./helpers/withSetPropAction\";export var EpisodeStoreModel=types.model(\"EpisodeStore\").props({episodes:types.array(EpisodeModel),favorites:types.array(types.reference(EpisodeModel)),favoritesOnly:false}).actions(withSetPropAction).actions(function(store){return{fetchEpisodes:function(){var _fetchEpisodes=_asyncToGenerator(function*(){var response=yield api.getEpisodes();if(response.kind===\"ok\"){store.setProp(\"episodes\",response.episodes);}else{console.tron.error(\"Error fetching episodes: \"+JSON.stringify(response),[]);}});function fetchEpisodes(){return _fetchEpisodes.apply(this,arguments);}return fetchEpisodes;}(),addFavorite:function addFavorite(episode){store.favorites.push(episode);},removeFavorite:function removeFavorite(episode){store.favorites.remove(episode);}};}).views(function(store){return{get episodesForList(){return store.favoritesOnly?store.favorites:store.episodes;},hasFavorite:function hasFavorite(episode){return store.favorites.includes(episode);}};}).actions(function(store){return{toggleFavorite:function toggleFavorite(episode){if(store.hasFavorite(episode)){store.removeFavorite(episode);}else{store.addFavorite(episode);}}};});","map":{"version":3,"names":["types","api","EpisodeModel","withSetPropAction","EpisodeStoreModel","model","props","episodes","array","favorites","reference","favoritesOnly","actions","store","fetchEpisodes","_fetchEpisodes","_asyncToGenerator","response","getEpisodes","kind","setProp","console","tron","error","JSON","stringify","apply","arguments","addFavorite","episode","push","removeFavorite","remove","views","episodesForList","hasFavorite","includes","toggleFavorite"],"sources":["/home/ehsan/dockerize-expo-rn-web-app/PizzaApp/app/models/EpisodeStore.ts"],"sourcesContent":["import { Instance, SnapshotOut, types } from \"mobx-state-tree\"\nimport { api } from \"../services/api\"\nimport { Episode, EpisodeModel } from \"./Episode\"\nimport { withSetPropAction } from \"./helpers/withSetPropAction\"\n\nexport const EpisodeStoreModel = types\n  .model(\"EpisodeStore\")\n  .props({\n    episodes: types.array(EpisodeModel),\n    favorites: types.array(types.reference(EpisodeModel)),\n    favoritesOnly: false,\n  })\n  .actions(withSetPropAction)\n  .actions((store) => ({\n    async fetchEpisodes() {\n      const response = await api.getEpisodes()\n      if (response.kind === \"ok\") {\n        store.setProp(\"episodes\", response.episodes)\n      } else {\n        console.tron.error(`Error fetching episodes: ${JSON.stringify(response)}`, [])\n      }\n    },\n    addFavorite(episode: Episode) {\n      store.favorites.push(episode)\n    },\n    removeFavorite(episode: Episode) {\n      store.favorites.remove(episode)\n    },\n  }))\n  .views((store) => ({\n    get episodesForList() {\n      return store.favoritesOnly ? store.favorites : store.episodes\n    },\n\n    hasFavorite(episode: Episode) {\n      return store.favorites.includes(episode)\n    },\n  }))\n  .actions((store) => ({\n    toggleFavorite(episode: Episode) {\n      if (store.hasFavorite(episode)) {\n        store.removeFavorite(episode)\n      } else {\n        store.addFavorite(episode)\n      }\n    },\n  }))\n\nexport interface EpisodeStore extends Instance<typeof EpisodeStoreModel> {}\nexport interface EpisodeStoreSnapshot extends SnapshotOut<typeof EpisodeStoreModel> {}\n\n// @demo remove-file\n"],"mappings":"uEAAA,OAAgCA,KAAK,KAAQ,iBAAiB,CAC9D,OAASC,GAAG,uBACZ,OAAkBC,YAAY,iBAC9B,OAASC,iBAAiB,mCAE1B,MAAO,IAAM,CAAAC,iBAAiB,CAAGJ,KAAK,CACnCK,KAAK,CAAC,cAAc,CAAC,CACrBC,KAAK,CAAC,CACLC,QAAQ,CAAEP,KAAK,CAACQ,KAAK,CAACN,YAAY,CAAC,CACnCO,SAAS,CAAET,KAAK,CAACQ,KAAK,CAACR,KAAK,CAACU,SAAS,CAACR,YAAY,CAAC,CAAC,CACrDS,aAAa,CAAE,KACjB,CAAC,CAAC,CACDC,OAAO,CAACT,iBAAiB,CAAC,CAC1BS,OAAO,CAAC,SAACC,KAAK,QAAM,CACbC,aAAa,gBAAAC,cAAA,CAAAC,iBAAA,YAAG,CACpB,GAAM,CAAAC,QAAQ,MAAS,CAAAhB,GAAG,CAACiB,WAAW,CAAC,CAAC,CACxC,GAAID,QAAQ,CAACE,IAAI,GAAK,IAAI,CAAE,CAC1BN,KAAK,CAACO,OAAO,CAAC,UAAU,CAAEH,QAAQ,CAACV,QAAQ,CAAC,CAC9C,CAAC,IAAM,CACLc,OAAO,CAACC,IAAI,CAACC,KAAK,6BAA6BC,IAAI,CAACC,SAAS,CAACR,QAAQ,CAAC,CAAI,EAAE,CAAC,CAChF,CACF,CAAC,WAAAH,cAAA,SAAAC,cAAA,CAAAW,KAAA,MAAAC,SAAA,UAAAb,aAAA,KACDc,WAAW,UAAAA,YAACC,OAAgB,CAAE,CAC5BhB,KAAK,CAACJ,SAAS,CAACqB,IAAI,CAACD,OAAO,CAAC,CAC/B,CAAC,CACDE,cAAc,UAAAA,eAACF,OAAgB,CAAE,CAC/BhB,KAAK,CAACJ,SAAS,CAACuB,MAAM,CAACH,OAAO,CAAC,CACjC,CACF,CAAC,EAAC,CAAC,CACFI,KAAK,CAAC,SAACpB,KAAK,QAAM,CACjB,GAAI,CAAAqB,eAAeA,CAAA,CAAG,CACpB,MAAO,CAAArB,KAAK,CAACF,aAAa,CAAGE,KAAK,CAACJ,SAAS,CAAGI,KAAK,CAACN,QAAQ,CAC/D,CAAC,CAED4B,WAAW,UAAAA,YAACN,OAAgB,CAAE,CAC5B,MAAO,CAAAhB,KAAK,CAACJ,SAAS,CAAC2B,QAAQ,CAACP,OAAO,CAAC,CAC1C,CACF,CAAC,EAAC,CAAC,CACFjB,OAAO,CAAC,SAACC,KAAK,QAAM,CACnBwB,cAAc,UAAAA,eAACR,OAAgB,CAAE,CAC/B,GAAIhB,KAAK,CAACsB,WAAW,CAACN,OAAO,CAAC,CAAE,CAC9BhB,KAAK,CAACkB,cAAc,CAACF,OAAO,CAAC,CAC/B,CAAC,IAAM,CACLhB,KAAK,CAACe,WAAW,CAACC,OAAO,CAAC,CAC5B,CACF,CACF,CAAC,EAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}